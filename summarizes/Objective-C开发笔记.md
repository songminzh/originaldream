[TOC]

# Objective-C开发笔记

## 1.类方法和实例方法

### 概述

#### 实例方法（动态方法）

标识符：- 开头

调用方式：[实例对象 方法]

实例方法在堆栈上

#### 类方法（静态方法）

标识符：+ 开头

调用方式：[类 方法]

类方法在堆上分配内存

#### 使用准则

1. 如果需要访问或者修改某个实例的成员变量时，将该方法定义成实例方法。
2. 类方法正好相反，它不需要访问或者修改某个实例的成员变量。
3. 类方法一般用于实现一些工具方法，比如对某个对象进行扩展，或者实现单例。

## 2.自动引用计数

### ARC基本原理

ARC是Automatic Reference Counting(自动引用计数器)的简称。

ARC的规则就是只要对象没有强指针引用，就会被释放掉。换而言之，只要还有一个强引用指针变量指向对象，那么这个对象就会存在内存中。弱指针指向的对象，会被自动变成空指针（nil指针），从而不会引发野指针错误。

ARC是**编译器特性**，而不是运行时特性，更不是垃圾回收器(GC)，核心就是编译时插入相应的retian release。

- **strong 修饰符**：对象的默认修饰符，强引用表示，变量在超出作用域时会调用release方法。
- **weak 修饰符**：弱引用的表示，不持有对象实例；弱引用在对象被释放的时候，会自动重置为nil；
- **unsafe_unretained 修饰符**：弱引用的表示，不持有对象实例；对象在被释放的时候，不会重置为nil；当对象释放后，再调用有极大的可能性崩溃；
- **autoreleasing 修饰符**：将NSObject 类对象注册到autoreleasepool 中；

生成并持有对象：alloc、new、copy、mutableCopy 
持有对象：retain方法 
释放对象：release方法 
废弃对象：dealloc方法 

### 总结

1. 在OC的对象中存有引用计数器这一整数值。
2. 调用alloc或者retain方法后，引用计数器加1。
3. 调用release后，引用计数器减1。
4. 当引用计数器值为0时，调用dealloc方法销毁对象。